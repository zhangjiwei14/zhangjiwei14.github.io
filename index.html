<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>zhangjiwei 的 blog</title><meta name="author" content="zhangjiwei"><meta name="copyright" content="zhangjiwei"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="zhangjiwei 的 blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="zhangjiwei 的 blog">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:author" content="zhangjiwei">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'zhangjiwei 的 blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-07-23 12:04:13'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/run.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="zhangjiwei 的 blog"><span class="site-name">zhangjiwei 的 blog</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">zhangjiwei 的 blog</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/09/10/C-%E5%A4%B4%E6%96%87%E4%BB%B6%E4%B8%AD%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F-const%E4%B8%8Estatic/" title="C++头文件中声明变量 const与static">C++头文件中声明变量 const与static</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-09-10T12:47:44.000Z" title="Created 2023-09-10 08:47:44">2023-09-10</time></span></div><div class="content">背景在平时写程序中，我们常常需要使用全局变量，但是如果在头文件(.h文件)中声明变量（非const常量）时，若有多个.cpp 文件include这个头文件时会出现多次定义的错误。如在a.h文件中：
1234// a.h 文件#include&lt;iostream&gt;int a ;void f();
在a.cc文件中：
1234567// a.cc 文件#include &quot;a.h&quot;void f() &#123;    a = 2;    std::cout &lt;&lt; &quot;a.cc: &quot; &lt;&lt; a &lt;&lt; std::endl;&#125;
在main.cc文件中
1234567#include &quot;a.h&quot;int main() &#123;    std::cout &lt;&lt; &quot;main: &quot; &lt;&lt; a &lt;&lt; std::endl;    f();    return 0;&#125;
编译会出错： multiple definition of &q ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/09/06/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E9%BB%98%E8%AE%A4%E6%9E%84%E9%80%A0%E3%80%81%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E3%80%81%E7%A7%BB%E5%8A%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/" title="深入了解默认构造、拷贝构造、移动构造函数">深入了解默认构造、拷贝构造、移动构造函数</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-09-06T14:36:00.000Z" title="Created 2023-09-06 10:36:00">2023-09-06</time></span></div><div class="content">默认构造，拷贝构造，移动构造函数背景当我们自己定义class时不可避免接触到构造函数，如果我们自己定义了构造函数，那么当我们实例化对象时候就会调用相应的构造函数，但是如果我们没有定义自己的构造函数时候，编译器会自动为我们生成一个默认构造函数，这个构造函数的功能是怎么样的呢？同理，默认的拷贝构造和移动构造是怎么样的？
名词解释本文须知如下名词含义:
隐式声明： 用户没有声明，编译器声明。平凡(trivial)： 编译器不会添加代码，编译器什么也不做非平凡（no-trivial）的&#x2F;&#x2F;隐式定义： 编译器会根据需要添加代码，生成函数
上述三个名词的解释只用于本文的默认构造、拷贝构造和移动构造。一般情况下，用户没有定义这三个函数的话编译器会隐式声明一个对应的函数（具体条件需读下文了解），编译器隐式声明函数并非一定添加代码，所以又分为平凡的和非平凡的，平凡的对应函数表示编译器不会添加任何代码，非平凡的表示编译器为了满足编译需求会添加一定代码。所以非平凡的对应函数又成为隐式定义的函数。其大致关系如下图：
12345graph LR    default_ctor[函数]--&g ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/09/06/c-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F%E5%AE%9E%E7%8E%B0%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85/" title="c++ 条件变量实现生产者消费者">c++ 条件变量实现生产者消费者</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-09-06T13:39:01.000Z" title="Created 2023-09-06 09:39:01">2023-09-06</time></span></div><div class="content">基本概念c++11中的条件变量 std::condition_variable是线程同步原语条件变量是解决哪些线程同步问题？试用场景是什么？顾名思义，所谓条件变量可以理解为一个条件，线程间进行同步通信的时候，通过这个修改和检查这个条件的状态，来进行某些操作。例如：生产者生产数据到队列，消费者从队列拿数据，其中生产者生产数据到队列的条件是条件1：队列不能满；而消费者从队列拿数据的条件是条件2：队列中有数据。生产者受条件1制约，同时能够改变条件2状态；消费者受条件2制约，同时可以改变条件1状态。所以生产者和消费者可以通过这两个条件进行线程同步。
流程与原理等待条件线程：

加互斥锁
检查条件是否满足，如果不满足则需要等待条件cv.wait，等他条件满足和其他线程的唤醒；
条件满足并被唤醒后继续下步操作

修改条件线程：

加互斥锁
修改条件
cv.notyfy()

上述流程中，对于两个线程而言，这两个条件变量共享的，都可以进行访问，所以需要使用锁保证数据的一致性，如果涉及到共享的临界资源也放入到锁的作用域。wait函数：函数会释放锁lock,判断条件是否满足，如果不满足则进入阻塞状态，等 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/09/04/C-%E6%97%B6%E9%97%B4%E5%BA%93-chrono/" title="C++时间库 chrono">C++时间库 chrono</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-09-04T15:17:41.000Z" title="Created 2023-09-04 11:17:41">2023-09-04</time></span></div><div class="content">时间 Chrono标准库中时间有关的结构，存储在chrono头文件中。头文件&lt;chrono&gt;,命名空间：std::chrono。命名空间中存储两个重要的结构体：duration和time_point
12345678namespace chrono &#123;   template&lt;typename _Rep, typename _Period = ratio&lt;1&gt;&gt;     struct duration;   template&lt;typename _Clock, typename _Dur = typename _Clock::duration&gt;     struct time_point; &#125;

duration：表示一段时间duration结构体如其英文名，表示一段时间。其定义：
12template &lt;typename _Rep, typename _Period = ratio&lt;1&gt; &gt;    struct duration;
其中_Rep 表示数目，_Period 表示单位，默认是1，单位是 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/09/03/my-first-aticle/" title="my first aticle">my first aticle</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-09-03T13:50:34.000Z" title="Created 2023-09-03 09:50:34">2023-09-03</time></span></div><div class="content">dafafadfa
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/09/03/hello-world/" title="Hello World">Hello World</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-09-03T13:36:36.600Z" title="Created 2023-09-03 09:36:36">2023-09-03</time></span></div><div class="content">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.
Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;

More info: Writing
Run server1$ hexo server

More info: Server
Generate static files1$ hexo generate

More info: Generating
Deploy to remote sites1$ hexo deploy

More info: Deployment
</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhangjiwei</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/09/10/C-%E5%A4%B4%E6%96%87%E4%BB%B6%E4%B8%AD%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F-const%E4%B8%8Estatic/" title="C++头文件中声明变量 const与static">C++头文件中声明变量 const与static</a><time datetime="2023-09-10T12:47:44.000Z" title="Created 2023-09-10 08:47:44">2023-09-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/09/06/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E9%BB%98%E8%AE%A4%E6%9E%84%E9%80%A0%E3%80%81%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E3%80%81%E7%A7%BB%E5%8A%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/" title="深入了解默认构造、拷贝构造、移动构造函数">深入了解默认构造、拷贝构造、移动构造函数</a><time datetime="2023-09-06T14:36:00.000Z" title="Created 2023-09-06 10:36:00">2023-09-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/09/06/c-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F%E5%AE%9E%E7%8E%B0%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85/" title="c++ 条件变量实现生产者消费者">c++ 条件变量实现生产者消费者</a><time datetime="2023-09-06T13:39:01.000Z" title="Created 2023-09-06 09:39:01">2023-09-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/09/04/C-%E6%97%B6%E9%97%B4%E5%BA%93-chrono/" title="C++时间库 chrono">C++时间库 chrono</a><time datetime="2023-09-04T15:17:41.000Z" title="Created 2023-09-04 11:17:41">2023-09-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/09/03/my-first-aticle/" title="my first aticle">my first aticle</a><time datetime="2023-09-03T13:50:34.000Z" title="Created 2023-09-03 09:50:34">2023-09-03</time></div></div></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">September 2023</span><span class="card-archive-list-count">6</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">6</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-07-23T16:04:13.162Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By zhangjiwei</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["我想起那天夕阳下的奔跑，那是我逝去的青春"])
  } else {
    document.getElementById("subtitle").textContent = "我想起那天夕阳下的奔跑，那是我逝去的青春"
  }
}
typedJSFn.run(subtitleType)</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>